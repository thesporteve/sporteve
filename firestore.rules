rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // ADMINS COLLECTION - Allow admin access for web app
    match /admins/{adminId} {
      allow read, write: if true; // Open access for admin web app
    }
    
    // News Staging - Temporary permissive rules for testing
    match /news_staging/{articleId} {
      allow read, write: if true; // Allow all operations for testing
    }
    
    // News Articles - Allow full CRUD for admin app
    match /news_articles/{articleId} {
      allow read: if true;
      allow create, update, delete: if true;
    }
    
    match /tournaments/{tournamentId} {
      allow read: if true;
      allow create, update, delete: if true;
    }
    
    match /athletes/{athleteId} {
      allow read: if true;
      allow create, update, delete: if true;
    }
    
    // Notifications - Allow admin app to write notification queue
    match /notifications/{notificationId} {
      allow read: if true;
      allow create, update, delete: if true;
    }
    
    // Sports Wiki - Allow admin CRUD operations and public read access
    match /sports_wiki/{wikiId} {
      allow read: if true;
      allow create, update, delete: if true;
    }
    
    // Content Feeds - Allow admin CRUD operations and public read access for published content
    match /content_feeds/{feedId} {
      allow read: if true; // Mobile app needs to read published content
      allow create, update, delete: if true; // Admin operations
    }
    
    // Content Generation Requests - Allow admin CRUD operations
    match /content_generation_requests/{requestId} {
      allow read: if true; // Admins can view all requests
      allow create, update, delete: if true; // Admin operations
    }
    
    // User Feedback - Allow anonymous feedback submission
    match /user_feedback/{feedbackId} {
      allow create: if true; // Allow anonymous feedback submission
      allow read: if true; // Allow reading for analytics
    }
    
    // Users collection - Allow users to update their own feedback tracking
    match /users/{userId} {
      allow read, write: if true; // Open for now
    }
  }
}
